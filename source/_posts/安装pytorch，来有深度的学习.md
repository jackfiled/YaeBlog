---
title: 安装pytorch，来有深度的学习
date: 2021-11-13 13:21:53
tags:
---

# 深度学习预备篇——安装深度学习框架——pytorch

## pytorch简介

现在我们正处在人工智能的风口上，虽然话说得好“在风口上，一头猪都能起飞”，但是我们显然没法像猪一样飞起来，但是跑两步，至少装一个可以运行人工智能
的环境是可以的，就算没法吃猪肉，也得看看猪跑。   
pytorch便是一个针对深度学习的张量库。   
注意，这句话里出现了两个专业名词，分别是“深度学习”与“张量库”，那么这两个词是什么意思？   
为了解释“深度学习”，我们得先复习一下人工智能的发展历史~~说的和我们已经学过一样~~   
在计算机刚刚出现的20世纪50年代与60年代，是人工智能发展史上的第一个高潮，这时候对于人工智能的研究主要专注于推理，一种搜索式的推理，当时的人工智
能研究者对于人工智能都抱有极高的期望，也确实取得了比较大的进展，出现了一系列令当时的人们都感到震惊的程序，比如可以解决高中数学课本上数学题的人
工智能与可以与人类进行简单交流的人工智能。这也导致大量的资金被投入研究人工智能，但是很快发现现实与当初研究者所作的乐观预计之间存在这不小的差距，
拨款纷纷离开了这个领域，于是对于人工智能的研究便陷入第一个低潮。   
在80年代，一种被成为“专家系统”的人工智能开始被全世界的公司所采用，知识处理成为了主流人工智能研究的焦点。这一时期的人工智能注重于记住尽可能多
的知识，通过大量专业知识的积累来解决问题。这个时候的人工智能研究者们获得了新一轮的拨款，虽然经历过上一次经费削减的研究者都预计人们会转向失望，
事实也确实如此，人工智能又进入了新一轮的寒冬。   
进入21世纪之后，深度学习又开始展露头角，深度学习是机器学习的一个分支。学习便是人工智能研究史上的第三个阶段，机器从大量的数据中自动分析获得规律，
并且利用规律对于未知的数据进行预测。深度学习就是实现机器学习的一种算法。    
而pytorch便是一种进行深度学习的框架，我们安装这个框架之后，就可以设计自己的人工神经网络（深度学习得出的一个模型）。    
> 上面属于是门外汉给门外汉讲课，瞎扯一通，没准的得在发布的时候删去上面一段或者重新写写

# 安装pytorch

## conda的简介

我们首先要明确的是，pytorch是一个开元的python深度学习库，在安装pytorch之前我们得先安装python解释器。可能有人会说，安装python解释器难道不是小学二年级的内容吗，无非是下载python，添加到环境变量，再命令行输入python验证安装是否完成三部曲难道是很困难的事情吗？    
可如果我们的在~~生活中~~学习中需要用到多个不同的python环境怎么办？安装多个python解释器之后如何在不同的环境中切换？而且可能在不同的版本下所用的
库的版本还不尽相同，这时候我们就需要一个便捷的”环境管理器“来管理你电脑上的python环境了，这个管理器便是conda。再安装了conda之后，我们就可以在
电脑里创建一个个”独立“的python环境，每个环境可以有不同的解释器，不同的库。可以说是十分方便了。   
> 至少一行命令就可以安装python，这已经很香了
> 而且，据我的初步观察，conda上还有一些pip中没有的库，毕竟conda也不只是面向python一门语言

## 安装conda
conda分为anaconda与miniconda两个类型，从名字就可以看出，miniconda长得就像是anaconda的青春版。**是也不是**，miniconda的确是一个精简版，
只有conda包管理器与python，但总所周知，有了包管理器就有了世界，你可以任意的下载你需要的包。而anaconda也并不是”完全版“，毕竟世界上的包千千万，
一般情况下我们都不会安装所有的包~~除非你说你就是要搞conda包的国内镜像源~~。它只是包括了一些常用的包，但是它常用的包与你要用的包可能没啥关系，
所以我们下载miniconda，自己下载我们所需要的包。    
我们访问miniconda的[官方网站](https://docs.conda.io/en/latest/miniconda.html) ，下滑找到最新的miniconda安装包下载链接（Latest Miniconda 
Installer Links） ![下载链接](/source/img/屏幕截图%202021-11-14%20183328.png) ，按照自己的电脑系统下载相应的安装包就可以了。也不大，就50
M出头的样子。   
下载完成之后，我们运行这个安装包，一路下一步就可以了，一般情况下不会有什么要改动的地方。   
安装完成之后，我们就会发现自己的开始菜单里多出来了两个快捷方式 ![快捷方式](/source/img/屏幕截图%202021-11-14%20192408.png)
在上面的那个快捷方式**Anaconda Prompt**是运行含有conda命令的CMD的快捷方式，而下面那个**Anaconda Powershell Prompt**是运行含有conda命令的Power shell界面的快捷方式。因为我个人对于power shell更加的熟悉我们就是用下面的那个快捷方式。   
这个时候肯定会有人好奇，竟然你都用power shell了，我们为啥不直接使用系统里已经有了的power shell，而要启动这里的这个显得有点奇怪的power shell呢？     
如果你好奇，你可以在系统里的power shell里键入conda, 会发现系统会告诉你"conda并不是内部化外部应用程序”，马上又有人会说，这个表示conda这个程序所在的位置没有被添加进入系统的环境变量里，如果添加了之后就可以在系统的power shell里使用了，而且我在安装miniconda的时候，还看见了添加到环境便令的选项，只是默认的情况下没有勾选。确实，在默认的状态下，conda并不会被添加在环境变量中，因为在conda的所在目录下还有python，如果你将conda添加进入了环境变量，就有可能改变原来了系统自带的python解释器。所以在默认情况下conda是不会被添加到环境变量中的。不过如果你的电脑中并没有python，或者像我一样直接采用conda来管理电脑上的python环境，也可以直接将conda添加在环境变量中，而且在后面我们使用VSCode编写代码的时候，我们只有将conda添加进入环境变量，才可以直接运行代码。~~当然，大概率还是有其它的办法，只是我太菜了不知道~~    
好，我们运行**Anaconda Powershell Prompt**，打开了这个窗口[!conda运行](../img/屏幕截图%202021-11-14%20194448.png)这个窗口的出现就标志着我们已经把conda正确的安装在我们的电脑之中了。   

## conda的使用

我们很容易发现，这个power shell与我们常用的power shell之家最大的不同就是在PS的前面多了一个（base），这个括号就表示我们目前所处的环境是conda自动生成的初始环境。
在我安装的时候，这个环境的python版本是3.9，一会我们就会在这个环境之中安装我们本文的主角**pytorch**,不过在安装之前，我们先来熟悉一下conda，毕竟conda在现在被大量的人使用，也一定有它的可取之处。   

### 使用conda创建与删除环境
> 在没有指明的情况下，请在**Anaconda Powershell Prompt**环境中使用一下的命令
```
conda info -e
```
这个命令会展示目前系统中已经创建的环境，输入后的效果：
```
# conda environments:
#
base                  *  C:\Users\ricardo.DESKTOP-N6OVBK5\Programs\miniconda3
py310                    C:\Users\ricardo.DESKTOP-N6OVBK5\Programs\miniconda3\envs\py310
```
其中会指出环境所在的文件夹，星号标志当前所处的环境。  
```
conda create --name newev python=3.10
```
使用这个命令来在创建一个新的环境，这个环境的由“--name”之后的内容决定，这个环境的python解释器版本由python=决定，注意这里的环境只用3.x，conda会自动寻找这个系列下最新的版本安装。   
在创建了一个环境之后，使用
```
conda activate <envirname>
```
来切换到相应的环境，envirname是你自己指定的环境的名称。   
如果像退出这个环境，回到conda的默认环境，使用
```
conda deactivate
```
再使用这个命令之后，我们就会回到base环境，我们可以通过看PS前面的名字来确认这一点。   

### 使用conda管理自己的库

```
conda list
```
这个命令会展示在在当前环境中安装的包。而且注意，虽然我们使用的是conda来管理与安装库，但是这并不表示python自带的pip包管理工具就被废弃，而且就算你通过pip安装的python库页会被conda上面的命令正确的识别到。   
```
conda list -n <envirname>
```
使用这个命令来查看指定的环境中安装的包。    
```
conda 
```